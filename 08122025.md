# 2025-08-12 學習日誌

- [x] add quite a few markdown formatters by the aid of Warp AI
- [x] markdownlint-cli2 rules settings
- [ ] <leader> will be autopaired with </leader> in markdown: nvim-ts-autotag
- [x] 禁掉 markdownlint-cli2 个逝長\[tsuā-tn̂g]檢查
- [?] 開始出現 "This can cause syntax highlighting issue" 怪訊息

## 安裝幾若个 markdown formatters

AstroNvim 預設个 `<Leader>lf` 是掠規个 markdown file 咧作用，無法度針對選取个
部份。AI 共我寫程式處理即个問題，創兩工，最後才去掠著幾若个 markdown formatters，
利用 stdin/stdout 个 process pipeline 來進行轉換，跳過 conform 个介入，總算做出
會凍操作个設定矣！以下是 AI 總結：

### Markdown Formatting Options

Visual Mode:

* `<Leader>lm` - Format ONLY selected text
* `<Leader>lf` - Format with **conform.nvim** (may format whole buffer)
* `<Leader>lF` - Choose formatter (may format whole buffer)
* `gq` - Vim's native format (CJK-aware)
* `<Leader>lq` - `gq` format selected text （重複 `gq` 是為著好揣）

Normal Mode:

* `<Leader>lf` - Format entire buffer with **conform.nvim**
* `<Leader>lF` - Choose formatter for buffer
* `gqap`/`gap` - Format paragraph with Vim
* `<Leader>lq` - `gq` format entire buffer

Available Formatters:

* mdformat - Python, consistent
* deno fmt - Fast, built-in to Deno
* prettier - Node.js, configurable
* remark - Node.js, plugin system
* gq - Vim native, CJK-aware

### Khoguan tips for formatting markdown

1. Visual mode `<Leader>lm` 較好用。

2. 漢英文混雜个長逝，用 visual mode `gq` 來處理較理想，拗逝了後，巡一下，
簡單修改就會使。

## markdownlint-cli2 rules settings

```yaml
# Disable inline HTML check to allow vim keycodes like <Leader>
MD033: false
```

設佇 ~/.markdownlinit.yaml 敢哪無效，AI 最後按呢處理：

The problem was that markdownlint-cli2 wasn't properly reading the configuration
from ~/.markdownlint.yaml. Here's what we did to fix it:

1. First attempt: We changed the commented-out MD033 rule to explicitly set
   `MD033: false` in your global ~/.markdownlint.yaml file, but this didn't work.

2. Solution: We created a local .markdownlint-cli2.yaml file in your project
   directory (~/Hak/) with the proper configuration format for
   markdownlint-cli2. This file explicitly disables the MD033 rule while
   preserving all your other custom rules.

The key insight is that:

* markdownlint-cli2 uses its own configuration file format
  (`.markdownlint-cli2.yaml`)
* Local configuration files take precedence over global ones
* The configuration needs to be nested under a config: key for markdownlint-cli2

Khoguan 補充：可能是因為 `~/Hak` 是一个 git repo，所以 markdownlint-cli2 需要
佇 repo root 揣著 `.markdownlint-cli2.yaml` 來遵趁，無咧管 $HOME 遐个設定。

Now your `<Leader>` keycodes in markdown files won't be flagged as HTML errors
anymore!

## 禁掉 markdownlint-cli2 个逝長\[tsuā-tn̂g]檢查

伊會檢查，袂替儂改即部份(auto-wrap)，規氣叫伊勿檢查。

## <leader> will be autopaired with </leader> in markdown

佇 astrocore 遐將 autopairs = false 嘛無效，只好直接關掉 nvim-ts-autotag。

彼是 Warp AI 个鋸箭法，我著搜揣出適用个 opts 設定，針對 markdown filetype 來關掉
auto-complete tag，或者是叫伊干焦補足一般常用个 html tags 就好。

**感想**：markdownlint 是嫌 `<Leader>` 是錯誤个 tag，ts-autotag 是家婆共伊補
`</Leader>`，攏是加做加錯个例。plugins 添愈濟，愈濟即款困擾，莫閣講有 plugins
相沖犯个問題。

## 開始出現 "This can cause syntax highlighting issue" 怪訊息

### 徙走有嫌疑个、無路用个 plugins - 無效

> [!WARN]
This can cause syntax highlighting issues!
Your  runtime path  has been modified to fix load order.
You can disable this by setting  experimental.check_rtp = false  or
set  experimental.check_rtp_message = false to only hide this mesaage.

將一寡有嫌疑、無路用个 lua 徙去 lua/plugins/test/ 內底閣試看覓。

> format.lua
markdown-formatter-selector.lua
markdown-partial-format.lua
onedark.lua
restore-gq-markdown.lua
styler.lua
ts-autotag.lua

無效！

### 重裝 AstroNvim 將 as1 个 plugins 勻勻仔徙入來

新裝版 `~/.config/nvim-as2`，指令代名 alias `as2`。

無裝 community.pack.markdown 就袂有可怕个 prettierd 入來！

以下是無問題个：

> _stop.lua
> astrocore.lua
> astrolsp.lua
> astroui.lua
> which-key.lua

閣來徙入 markview.lua 就害去矣！想袂到啊！來裝 community 版看覓！
裝起來，入來本檔案，無看著迄个怪訊息！
