# 2025-07-16 學習記錄

- [x] pomo.nvim 基本建置
- [ ] Snacks.indent 設定
- [x] 建置學習日誌 local/remote repo 環境
- [x] 學習 Markdown best practices
- [x] AI 更新 .zshrc

## 早起飯前

### 升級 Ruby
Warp AI Ruby Update Summary

✅ Updated from Ruby 3.1.4 to Ruby 3.4.5 (the latest stable version)

What's New in Ruby 3.4.5:
*  Performance improvements with YJIT enabled by default
*  Enhanced PRISM parser for better performance
*  New language features and optimizations
*  Updated bundled gems and libraries

Configuration Updates:
*  ✅ Installed Ruby 3.4.5 using ruby-install
*  ✅ Updated .bash_profile and .zshrc to use Ruby 3.4.5 by default
*  ✅ Verified Bundler 2.6.9 is ready to use
*  ✅ Confirmed Gem 3.6.9 is available

Next Steps:
1. Restart your terminal or run source ~/.bash_profile (or source ~/.zshrc if
   you use zsh) to apply the changes
2. In new terminal sessions, Ruby 3.4.5 will be the default version
3. Your existing Ruby projects should work with the new version, but you may
   want to run `bundle install` to ensure gem compatibility

NOTE: 注意升級後可能會影響我个 Jekyll-based blog site

### 複製 pomo.nvim

因為我定定愛重開 nvim 來測試 config 修改了後个後果，所以愛將 pomo.nvim 複製過去
另外一个 nvim 環境。

選用 ~/.config/nvim-vim 來做。先將基本个 Neovim 建立起來，了後複製
pomo.nvim-vim 佮配套檔案過去。成功！

### toggle snacks.indent

叫 AI 共我寫較緊！毋過嘛是來來回回改幾若擺。

以上做到 09:49

## 下晝

佇大板椅補眠，即擺感覺大理石會冷，睏無好。四點半起來，精神無真好。

* 16:40 - 17:00 揣著工具軟體[Swift Shift](https://github.com/pablopunk/SwiftShift)
會使撨徙 Kitty 視窗（Better Touch Tool 即方面个功能對 Kitty 無效），按無我就會使
利用 `hide_window_decorations yes` 个 Kitty 視窗配合 nvim 來做 pomo.nvim
个執行平台

## 暗頓前

* 18:50 - 17:20 建置學習日誌 local/remote repo

* 17:20 - 17:45 問 AI 關係 markdown format

  1. header 下底上好著有空白行
  1. code block 頭前上好著有空白行
  1. ordered list items 上好攏用 1.
  1. 躼躼長个 list items 會使分段，一个 item 个最後一段佮下一个 item 中間著愛有
     空白行。
  1. indent 真重要
  1. 多段落个 ordered list 欲佮一个新个 order list 切開：
     - Add a horizontal rule, header, or other block element to clearly separate the lists
     - Add a html comment  
       `<!-- End of first list -->`

## 暗頓後

### Warp MCP tool setup

目前設按呢：

```
{
  "filesystem": {
    "command": "npx",
    "args": [
      "-y",
      "@modelcontextprotocol/server-filesystem",
      "~/.local/share"
    ],
    "env": {},
    "working_directory": null,
    "start_on_launch": true
  }
}
```
無好用，先刣捒。

### fzf 用法：進行中

頂擺 Warp AI 共我設真濟 alias/function 佇 .bashrc 內底，我到今才開始來了解。

### 叫 AI 共我將 Bash 个設定整合入去 .zshrc 內底

AI 有提出計畫書，kah佇下底。我一時無氣力tsim-tsiok看，先 `cp `~/.zshrc
~/src/dotfiles/` 了後就放予 AI 去伐落。

```
1. Inventory and Gap Analysis
    1. Parse ~/.bash_profile, ~/.bashrc and existing ~/.zshrc.  
    2. Produce a checklist of every function, alias, env-var, and external “source” line that is **present in bash but missing in zsh**.  
    3. Classify each item into:  
       • Paths / env-vars  
       • Aliases  
       • Functions (fzf, dev, misc)  
       • External integrations (rakubrew, bash-completion, etc.)  
    This list is the source-of-truth for the following migration steps.

2. Foundational Helpers & PATH logic
    1. Ensure `add_to_path` helper is copied verbatim (zsh-compatible `for dir in "$@"` loop).  
    2. Keep Homebrew `eval "$(/opt/homebrew/bin/brew shellenv)"` at top.  
    3. Re-use bash PATH sections, merging with current zsh PATH edits to avoid duplication.  
    4. Wrap the whole block in comments  
       ```zsh
       ### >>> PATH SETUP (migrated from bash) >>>
       …code…
       ### <<< PATH SETUP <<<
       ```
3. fzf Complete Integration
    1. Copy the two `source /opt/homebrew/Cellar/fzf/**/completion.bash|key-bindings.bash` lines and change extension to `.zsh` (fzf ships both).  
       Example:  
       ```zsh
       [[ -f $(brew --prefix)/opt/fzf/shell/completion.zsh ]] && \
         source $(brew --prefix)/opt/fzf/shell/completion.zsh
       ```  
    2. Export `FZF_*` variables exactly as in bash.  
    3. Port advanced functions (`ff`, `fif`, `fcd`, `fgc`, `kill-fzf`) verbatim – they are POSIX-safe.  
    4. Place everything in a new section `### FZF SETUP`.
4. Alias Migration
    1. Copy **all** alias lines from bashrc.  
    2. Remove any that already exist in zshrc or conflict with oh-my-zsh defaults (keep bash versions by default).  
    3. Keep them grouped:  
       • eza / ls aliases  
       • Navigation & blog shortcuts  
       • Neovim variants & dev tools  
       • Safety wrappers (cp -i, rm etc.)  
    4. Add comment headers for each group for future maintainability.
5. Development Functions (C++ compile helpers etc.)
    1. Port `g14`, `c15`, `c18`, `g11`, `vim()` wrapper exactly, changing nothing (they are zsh-compatible).  
    2. Create section `### Development Helpers`.  
    3. Re-check any bash-specific arrays (`$@`, `$1`) – they work the same in zsh.  
    4. Add `set -o noclobber` equivalent: `set -o noclobber` also works in zsh.
6. Utility Navigation & File Helpers
    1. Functions: `mcd`, `cdl`, `mdl`, `cdwhich`, enhanced `cd` override, `locate` wrapper, `pbc`, `pbp`, Path Finder (`pff`,`pft`).  
    2. Verify no bash-only built-ins are used; if `builtin` is referenced, change to `builtin cd` → `builtin cd` works in zsh.  
    3. Add them under `### Navigation & Misc Helpers`.
7. Environment Variables & Colored Man Pages
    1. Append missing exports:  
       • `CDPATH`, `HISTSIZE`, `STARDICT_DATA_DIR`, `POD_TO_TEXT_ANSI`  
       • Colored man page `LESS_TERMCAP_*` block  
       • `RAKUDOC`, `PAGER`, `EDITOR`  
       • `HOMEBREW_NO_ENV_HINTS`, `HOMEBREW_GITHUB_API_TOKEN=$(security …)`  
    2. Keep locale (`LANG`, `LC_MESSAGES`) consistent.  
    3. Group under `### Environment Variables`.
8. Tool Integrations & Completions
    1. **Rakubrew**: add  
       ```zsh
       eval "$("$HOME/.rakubrew/bin/rakubrew" init Zsh)"
       ```  
    2. Ensure chruby, nvm, conda, cargo blocks already present; keep order: chruby **after** PATH finished.  
    3. Homebrew bash-completion ⇒ source zsh counterpart:  
       ```zsh
       if [[ -r $(brew --prefix)/share/zsh/site-functions/_brew ]]; then
         FPATH+=":$(brew --prefix)/share/zsh/site-functions"
         autoload -Uz compinit && compinit
       fi
       ```  
    4. Re-source iTerm2 integration (already present).
9. Load-order Validation & Syntax Check
    1. Run `zsh -n ~/.zshrc` to catch syntax errors.  
    2. Launch a subshell: `env -i zsh -f` then `source ~/.zshrc` to ensure it boots without relying on outer env.  
    3. Manually test:  
       • `fzf` bindings  
       • Key aliases (`l`, `dir`, etc.)  
       • Compile helpers (`g14 test.cpp`)  
       • `locate`, `ff`, `kill-fzf`  
    4. Document any runtime issues to fix.
10. Documentation & Backup
    1. Save original ~/.zshrc as `~/.zshrc.backup-$(date +%Y%m%d)`.  
    2. Add header comment to new .zshrc noting migration date and origin files.  
    3. Optionally commit to dotfiles repo.
    ```
---

AI 揣著个欠缺項目

Checklist of Differences between Bash and Zsh Configurations

#### Paths / Env-vars
•  Missing from Zsh:
•  export MANPATH=~/local/share/man:$HOMEBREW_PREFIX/opt/coreutils/share/man:$MANPATH (Bash)
•  export STARDICT_DATA_DIR=/usr/local/share/stardict/dic (Bash)
•  export HISTSIZE=5000 (Bash)

#### Aliases
•  Missing from Zsh:
•  fzf-related aliases (from .bashrc):
◦  alias vf='nvim $(fzf -m)'
◦  alias cf='cd $(fd --type d --exclude .git | fzf)'
◦  alias rg-fzf='rg --line-number --no-heading --color=never . | fzf --delimiter : --preview "bat --color=always --highlight-line {2} {1}"'
◦  alias glog='git log --oneline | fzf --preview "git show {1}"'
◦  alias gbr='git branch | fzf | xargs git checkout'
◦  alias gst='git status --porcelain | fzf --preview "git diff --color=always {2}"'
•  Miscellaneous:
◦  alias cdblog='cd /Volumes/Extreme/blog/' (Bash)

#### Functions (fzf, dev, misc)
•  Missing from Zsh:
•  Defined in .bashrc:
◦  ff(): fzf file search function.
◦  fif(): fzf interactive grep search.
◦  fcd(): fzf directory navigation.
◦  fgc(): fzf git commit navigation.
◦  kill-fzf(): fzf kill process feature.
◦  vim(): custom vim function with terminal settings.

#### External Integrations
•  Missing from Zsh:
•  fzf integration source lines (from .bashrc):
◦  source /opt/homebrew/Cellar/fzf/0.63.0/shell/completion.bash
◦  source /opt/homebrew/Cellar/fzf/0.63.0/shell/key-bindings.bash
•  source /opt/homebrew/opt/bash-git-prompt/share/gitprompt.sh (Bash)
•  rakubrew initialization:
◦  eval "$(rakubrew init Bash)" (Bash, commented)

---

Migration Summary

✅ Environment Variables Added:
•  MANPATH - Manual page paths including Homebrew coreutils
•  STARDICT_DATA_DIR - StarDict dictionary data directory
•  HISTSIZE=5000 - Command history size
•  HOMEBREW_NO_ENV_HINTS - Suppress Homebrew hints
•  HOMEBREW_GITHUB_API_TOKEN - GitHub API token from keychain
•  LC_MESSAGES=en_US.UTF-8 - Locale for messages
•  RI_PAGER and RI - Ruby documentation settings
•  PO - Blog posts directory shortcut
•  POD_TO_TEXT_ANSI - Perl documentation coloring
•  RAKUDOC - Raku documentation path
•  PAGER and EDITOR - Default pager and editor
•  Colored man pages environment variables

✅ Aliases Added:
•  fzf aliases: vf, cf, rg-fzf, glog, gbr, gst
•  Navigation aliases: cdblog, .., .2, .3, .4, .5
•  Tool aliases: rg, p3, dict, skim, fd
•  Neovim distro aliases: nvim-ks, nvim-nc, nvim-nc2, nvim-lazy, nvim-astro, nvim-exo, Vim, nvim1, nvim2, nvr1, nvr2
•  eza aliases: Modern ls replacement with various options

✅ Functions Added:
•  fzf functions: ff(), fif(), fcd(), fgc(), kill-fzf()
•  Utility functions: mcd(), cdl(), mdl(), cdwhich()
•  Clipboard functions: pbc(), pbp()
•  C++ compiler functions: g14(), c15(), c18(), g11()
•  Enhanced functions: cd(), locate(), vim(), xraku()

✅ External Integrations Added:
•  fzf integration: Sourced completion and key-bindings for zsh
•  fzf configuration: Default options, commands, and preview settings
•  Shell settings: set -o noclobber

Notes:
1. The fzf shell integration paths were automatically adjusted from .bash to .zsh extensions
2. All functions were preserved with their original bash syntax, which is compatible with zsh
3. The configuration maintains the same organization and structure as your original bash setup
