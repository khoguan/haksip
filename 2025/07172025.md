
# 2025-07-17 學習日誌

- [x] 撨徙 ~/lua/{options,keymaps,commands}-khoguan.lua
- [x] fzf 學練
- [x] night-owl theme 改 comment 色水予較光咧
- [x] 改 snacks.indent 予伊佇 markdown 佮 text 个時 disable
- [ ] toggle indent keymap 拆做兩个，一个 enable，一个 disable
- [?] AI 共我改 RobotoMono Nerd Font，增加第八、整九聲調符
- [x] 讀 auto-session 个基本用法
- [x] 讀一點仔 lazy.nvim 个設定法

## 早頓後

### 撨徙 ~/lua/*-khoguan.lua

```
md ~/.config/nvim/lua/khoguan
mv ~/lua/*-khoguan.lua ~/.config/nvim/lua/khoguan
改名，刪除 -khoguan 部份
init.lua 將 dofile 改做 require
```

### fzf

繼續學練 fzf 相關用法，preview 佇 Warp 無法度捲動，去 Warp 網站問 AI，講是 fzf 目前个
keybindings 佇 Warp 攏無法度用。

### fzf settings in my .bashrc

#### Quick Navigation & Editing

*  vf - Open selected file(s) in nvim
*  cf - Change to selected directory
*  ff() - Search and open file in vim with preview

#### Git Integration

*  glog - Browse git log with commit preview
*  gbr - Interactive branch checkout
*  gst - Browse git status with diff preview
*  fgc() - Interactive git commit browser

#### Search Functions

*  rg-fzf - Search file contents with ripgrep + fzf
*  fif() - Find in files (search content across multiple files)
*  fcd() - Interactive cd with tree preview

Process Management
*  kill-fzf() - Kill processes interactively

### How to Use Efficiently

#### Built-in Key Bindings

*  Ctrl+R: Search command history
*  Ctrl+T: Insert file path at cursor
*  Alt+C: cd into selected directory

#### Daily Workflow Examples

```bash
# Quick file editing
vf                    # Select and edit file
ff                    # Same with preview

# Navigate directories
cf                    # Change to directory
fcd                   # Change with tree preview

# Search in files
fif "function_name"   # Find files containing text
rg-fzf               # Interactive ripgrep search

# Git workflow
glog                 # Browse commits
gbr                  # Switch branches
gst                  # Check status with previews
```
#### Tips for Maximum Efficiency

1. Use multi-select: Many commands support -m flag for selecting multiple items
2. Preview shortcuts: Use preview windows to see content before selection
3. Combine with other tools: Your setup integrates bat, tree, fd, and rg for rich previews
4. Fuzzy matching: Don't type exact names - fzf's fuzzy matching is very forgiving

4. Power User Features

*  Your fd alias includes --no-ignore --hidden for comprehensive file discovery
*  bat previews show syntax highlighting and line numbers
*  Git functions show colored diffs and commit details
*  Process killing with visual selection

Your fzf setup is quite sophisticated and follows best practices by leveraging modern
CLI tools (fd, bat, rg, tree) for enhanced functionality. The key to efficiency is
memorizing the aliases and using the preview features to make informed selections
without opening files first.

### 改 nigth-owl theme 註解个色水

叫 AI 修改，伊佇 ~/lua/plugins/night-owl 內底加一行 code

AI: I've updated your night-owl configuration to make the comment color brighter.
Here's what I changed:

Original comment color: #637777 (muted blue-gray)  
New comment color: #7fdbca (brighter cyan, which is actually the cyan2 color from the
night-owl palette)

The new color is significantly brighter and more vibrant while still maintaining good
readability against the dark background. The color #7fdbca is already part of the
night-owl palette, so it will harmonize well with the overall theme.

To see the changes:
1. Save the file (:w in Neovim)
2. Reload your Neovim configuration (:source % or restart Neovim)

If you want to try other bright colors from the night-owl palette:
*  #78ccf0 (light_blue) - bright blue
*  #baebe2 (cyan5) - softer bright cyan  
*  #7e97ac (gray6) - brighter gray
*  #89a4bb (nvim_tree_file) - medium bright blue-gray

Just replace #7fdbca in the configuration with any of these hex codes if you prefer a
different brightness level or hue.

---
The color palette is defined in ~/.local/share/nvim/lazy/night-owl.nvim/lua/night-owl/palette.lua

#### Quick reference for common colors

Here are some of the most useful colors from the palette for customization:

Bright colors (good for comments):
*  #7fdbca (cyan2) - bright cyan
*  #78ccf0 (light_blue) - bright blue  
*  #baebe2 (cyan5) - soft bright cyan
*  #89a4bb (nvim_tree_file) - medium bright blue-gray
*  #7e97ac (gray6) - brighter gray

Main theme colors:
*  #d6deeb (fg) - main foreground
*  #021727 (bg) - main background
*  #82aaff (blue) - functions
*  #c792ea (magenta) - keywords
*  #f78c6c (orange) - types
*  #ecc48d (light_orange) - strings
*  #c5e478 (green) - built-ins

Accent colors:
*  #ff5874 (red) - errors
*  #ffd602 (yellow) - warnings
*  #9ccc65 (sign_add) - git additions
*  #e2b93d (sign_change) - git changes

You can use any of these hex codes in your vim.api.nvim_set_hl() calls to customize various highlight groups!

### 改 snacks.indent 予伊佇 help/text/markdown filetypes 个時關起來

Warp AI 除了替我修改本來無效个 code，閣共我增加兩个指令：`:SnacksIndentEnable`,
`:SnacksIndentDisable`，我本來用 toggle 个 keymap 著愛拆做兩个。

#### AI Summary of what we fixed:

1. Identified the original problem: The second autocmd was re-enabling indent for
   markdown files because markdown != "help" was true.
2. Fixed the logic: Updated the second autocmd to check against all disabled
   filetypes (help, text, markdown) instead of just help.
3. Added timing safety: Used vim.defer_fn() to ensure Snacks is fully loaded before
   trying to disable/enable it.
4. Confirmed it's working: You can see the debug message and the manual commands
   work.

Current status:
•  ✅ Snacks.indent is properly disabled for markdown files
•  ✅ Manual commands :SnacksIndentDisable and :SnacksIndentEnable work for testing
•  ✅ Code is clean without debug messages

If you're still seeing some indent-like visual elements in markdown files, they're
likely from:
•  The listchars setting in your options.lua (which shows tabs as ⇥ )
•  Other whitespace indicators (which are different from indent guides)

The snacks.indent functionality is now working correctly for your markdown files!

---
### 補全 RobotoMono Nerd Font - 無成功

1. Check prerequisites and back-up originals
1. Verify both fonts exist:  
   • Source: `~/Library/Fonts/DoulosSIL-R.ttf`  
   • Target (to be modified): `~/Library/Fonts/RobotoMonoNerdFont-Regular.ttf`  
2. Copy both files to a working folder (e.g. `~/font-mods/`) so the originals remain untouched.  
3. Record the SHA-256 hashes of the original files for easy rollback.
2. Install FontForge (if absent)
1. On macOS, run `brew install --cask fontforge` or download the official DMG.  
2. Confirm installation with `fontforge -version`.
3. Open source and target fonts in FontForge
1. Launch FontForge.  
2. Use File ➜ Open to load `DoulosSIL-R.ttf`.  
3. Open a second window with `RobotoMonoNerdFont-Regular.ttf`.
4. Copy glyphs U+030D and U+030B from Doulos SIL to Roboto Mono Nerd Font
1. In Doulos window, locate glyphs:  
   • U+030D “COMBINING VERTICAL LINE ABOVE”  
   • U+030B “COMBINING DOUBLE INVERTED BREVE”  
2. Select each glyph (Shift-click or Ctrl-click).  
3. Edit ➜ Copy.  
4. Switch to the Roboto window, select the same code-points, Edit ➜ Paste.  
   • If those slots are empty, FontForge will insert them.  
   • If pre-existing, delete/rename the old glyphs first.
5. Adjust metrics and anchors for combining behavior
1. Ensure the glyphs’ advance width matches Roboto’s monospace width (usually 0 for combining marks).  
2. Open Glyph ➜ Anchors and set a ‘mark’ anchor at (0, baseline) if missing.  
3. Test with Glyph ➜ New Test to overlay marks on “a”, “i”, etc.  
4. Fine-tune vertical position so the mark sits above the cap height without clipping.
6. Generate and save a new font file
1. File ➜ Generate Fonts…  
2. Choose TrueType (TTF).  
3. Name the file `RobotoMonoNerdFont-Regular+CombMarks.ttf`.  
4. Make sure “Validate Before Saving” is checked; fix any reported issues.  
5. Save to `~/font-mods/`.
7. Refresh font cache and install the modified font
1. Copy the new TTF to `~/Library/Fonts/`.  
2. Run `fc-cache -fv` (if you use fontconfig) or simply log out/in.  
3. In macOS Font Book, disable the old RobotoMono Nerd Font to avoid duplicates.
8. Test the combining marks in Warp terminal
1. Set Warp’s font to “RobotoMonoNerdFont Regular + Comb Marks”.  
2. Echo test strings:  
   `echo -e "x\u030D  y\u030B  xy\u030D\u030B"`  
3. Verify the marks render above the base glyphs and the text grid alignment remains intact.  
4. If positioning is off, return to FontForge, adjust anchors, regenerate, and retest.

---
To complete this task, follow these steps:

1. Ensure Advance Width Matches:
•  Open your font editing software and locate the combining marks.
•  Check that their advance width is set to zero, as this matches the Roboto Monospace width. Adjust if necessary.
2. Set 'Mark' Anchor:
•  In your font editor, go to each combining glyph.
•  Open Glyph ➜ Anchors.
•  If the 'mark' anchor is missing, add it and set it at the coordinates (0, baseline).
3. Test with New Test:
•  Use the Glyph ➜ New Test feature to overlay marks on characters like “a” and “i”.
•  This helps visualize their placement and alignment with base letters.
4. Fine-tune Vertical Position:
•  Adjust the vertical positioning of the marks so they sit just above the cap height.
•  Ensure there is no clipping and the visual appearance is clean.
