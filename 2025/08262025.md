# 2025-08-26 學習日誌

- [x] 感想：Will the recently learned paste tip remain for the rest of my life?
- [x] nvim recovery 無試毋知，試過才知佮 usr_10.txt 所寫有出入
- [x] 讀完 vim/nvim help usr_10.txt

## 即段期間所學著上重要个 paste 撇步我咁會一世儂記椆椆？

我即世儂學物件，攏半路tsi̍h pùn-tann，最近暝日學 Neovim，扑算也會tsi̍h-tsām去。
幾十年來使用 vim，上大个一步lóo就是 paste 个時，舊文字佮新文字相濫參。即段期間
先學著用 `o` 增加新行了後，`<C-o>` 暫時脫離 insert mode，進入 normal mode，`p`
了後，自動繼續 insert mode。後來閣學著用 `:pu` 就會使將所 yank 佇 unnamed
register 个文字毋管伊本身有包含 `<NL>` 無，一律 paste 來下一个新行。

日後我若將即兩個月所學个物件攏放袂記得，只要我有繼續咧用 vim，大概猶閣會記得即个
`:pu` 指令。

## nvim recovery

1. nvim -r file.ext  
   To recover file.ext

2. nvim -r ""  
   usr_11.txt: To recover a file which has not yet named before crash.
   我試个結果，AstroNvim 無效。著愛用 `:recover`

3. nvim -r  
   usr_11.txt says that "Vim can store the swap file in several places.
   To find it, change to the directory of the file, and use `nvim -r`"

我試个結果，`nvim -r` 會列出目前佇 ~/.local/state/nvim/swap/ 所有个 swap
file，佮咱佇佗一个目錄執行，無啥關係。

若是已經有號名个檔案（但是猶未赴存檔），先扑 `nvim -r`，nvim 會顯示出
迄个名稱 `{thefilename}`，加一个 extension name，格式是 `.s[uvw][a-z]`，
咱才閣 `nvim -r {thefilename}` 來救檔。

若是猶未號名个檔案，先入去 nvim 開一个空白 buffer，才 `:recover`，若是
`~/.local/state/nvim/swap` 內底有幾若个 swap files 佇遐，伊會列出來予咱選，
無名个 swap 無編號，但是咱愛家己算看是出現佇第幾个，來扑數字。按呢檔案就救轉來
顯示佇 buffer 中矣，咱才緊號名存檔就好。若是超過一个無名檔案，無法度看出咱欲愛个
到底是佗一个，就一个一个去試。

隨个仔隨个確認過，看是欲恢復，抑是欲放棄，攏處理了後，就去
`~/.local/state/nvim/swap` 遐將處理過个 swap 刣捒，免得日後閣新个待救檔
參濫做伙。

## 讀完 vim/nvim help usr_10.txt

1. `:0r outer.txt`  
   將 outer.txt 讀入來 buffer 上頭前

2. `:,$w !sort`  
   將目前即逝到buffer尾送出去予 sort 排序，排序完顯示佇畫面下底予咱看看咧就煞矣，
   除非用 redirect 指令共伊重𤆬去別位。

   注意佮 `:,$w! sort` 个差別，這是硬寫出去予一个號做 sort 个文字檔，根本無排序。

3. `:,$!sort`  
   將目前即逝到buffer尾送出去予 sort 排序（預設用字母順序，若欲用數字排序愛加
   `-n` 參數），排了閣送轉來取代即个範圍个逝。

4. Summary: 有 `r` 是讀入來，有 `w` 是寫出去，`{range}!` 才是有出有入。

5. 以上第3條會使佇 normal mode 做 `!Gsort`，扑到 G 个時，伊就會跳去下底 cmdline
   顯示 `.,$!` 等咱輸入所欲用个外部指令。即步我三十幾年來頭擺學著，扑算是 vim
   新設个功能，較無遐直覺，因為指令順序無合思維，總是較簡捷。

6. 思考題：按怎擲出去處理了，貼轉來 buffer 个別所在，勿去崁過舊資料？  
   這簡單做法只是先複製欲處理个範圍貼去 buffer 別位，才閣佇迄位做操作。
   但是我來想看有別步無。

7. 頂面第6點暫時解法：  

   ```vimscript
   redir @s
   'a,'bw !sort
   redir END
   'cpu s
   ```

   redir 个問題會佇頭前加出一寡空白逝，原因猶著查。
