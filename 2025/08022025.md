# 2025-08-02 學習日誌

- [X] 繼續研究 AstroNvim 个 Markdown rendering
- [X] 改 tokyonight-night inline code color bg/fg
- [X] 揣看 night-owl 本身有 utils 來改 hlgroup 無？無。

## AstroNvim markdown rendering

### 倚靠 tokyonight 主題个設定較快

預設个 astrodark theme 無像 tokyonight 按呢有特別調整 render-markdown
个標題底色。以下是我試了總算有效个設定：

1. `astroui.lua` 指定預設 `colorscheme = "night-owl"`

2. `styler.lua` 指定針對無仝 filetype 用無仝主題：

   ```lua
   opts = {
     themes = {
       lua = { colorscheme = "night-owl" },
       markdown = { colorscheme = "tokyonight-night" },
       help = { colorscheme = "catppuccin-mocha", background = "dark" },
     },
   },
   ```

3. `render-markdown.lua` 改變主題：

   ```lua
   config = function() vim.cmd.colorscheme "tokyonight-night" end,
   ```

第 3 點若無設會無穩定。上捷出問題个所在就是 code block 个起頭標記三个 backtick
加 lua 字眼个時，後壁會出現一條鑿目个白底色，有時會，有時袂，真lóo。

> [!NOTE]
> AstroNvim 有真濟特異功能，親像進入 InsertMode 个時，字級會變大，離開
> InsertMode 進入 NormalMode 个時，字級閣自動變細。按呢个理由大概是欲予儂
> 編寫文字个時看較明，抑 NormalMode 字級變細，著會使處理較大範圍个文字區塊。

今仔日 night-owl 个色水指定閣無啥正常矣。後來感覺著用 `:Styler` 切換主題，
毋通閣用 `:colorscheme`，既然都用 styler 咧管控矣。加入 styler.lua 了後，
扑 `:colorscheme` 所顯示个主題名稱就袂準矣，明明是 night-owl，伊煞講是
tokyonight-night。

`tokyonight` 是真優秀个主題，色水光暗對比控制了不止仔好，較袂傷目睭。我另外試
`modus`，對比就傷強烈，fb_main #ffffff, bg_main #000000。`night-owl` 佇兩種中間。
tokyonight 有一步䆀，就是 code string 的色水對比無好，tsîn著較食力，佳哉 folke
个說明寫了簡單好綴，真順利就改成功矣。


## 改 tokyonight-night inline code color bg/fg

tokyonight.lua 將伊預設个 inline code 對比提升，fg 變光，bf 變暗。
參考 folke/tokyonight.nvim README

```lua
  opts = {
    on_highlights = function(highlights, _) -- 2nd param is colors
      local util = require "tokyonight.util"
      highlights["@markup.raw.markdown_inline"] = {
        bg = util.darken("#414868", 0.3),  -- 0~1 darkest to original
        fg = util.lighten("#7aa2f7", 0.4), -- 0~1 lightest to original
      }
    end,
  },
```

## 揣看 night-owl 本身有 utils 來改 hlgroup 無？

伊無 `on_colors()`, `on_highlights()` thang用，也無 utils，佮 tokyonight
袂比得。
