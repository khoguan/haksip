# 2025-08-23 學習日誌

- [x] 核三繼續運轉公投
- [ ] astrocore.rooter
- [ ] selene 改用 vim-lint 來管理看覓
- [x] 勿用 selene，改用 luacheck with vim-lint
- [x] git log --name-status
- [x] find & awk to count line length of every lua file

## 核三繼續運轉公投

倚晝去夾菜，看著店內報紙頭版標題才想著今仔日是公投日，轉來了後閣出去頓票，期待
台灣民意展現出非核个決心。

## astrocore.rooter

佇 `astrocore opts = { rooter = { ... }`} 遐做設定，會自動 cd 過工作檔案所屬个
project root directory。也提供一寡 API，通做親像檢查工作檔案所屬个專案根目錄。
伊有幾若種判斷方式，像用 lsp、各種版本管理系統个專屬目錄名，時常出現佇根目錄个
檔名等等。

## selene 改用 vim-lint 來管理看覓

因為 none-ls 對 selene 个設定檔真 khi-khiau，不時出現迄个怪錯誤，今來改用
vim-lint 試看覓。

1. 先 comment out community lua pack 試看按呢 `lua_ls`, `selene`, `stylua`
   會閣出現袂？結果：stylua 無--去，賰 selene 佮 `lua_ls` 兩个。
2. 用 `:MasonUninstall selene` 結果：賰 lua_ls 一个。
3. 改寫 community.lua.pack，刪除 mason-null-ls 管控 selene，取消 vim-lint
   optional 个設定，予伊變強制安裝。

結果：袂曉寫 vim-lint 个設定檔，說明書嘛看無啥有。但是透過即个失敗个過程，我翻頭
理解 selene.toml 所寫个 rules 是啥意思矣！今來試看將遮个規則補入去進前會出現
null-ls 錯誤个目錄。

## 勿用 selene，改用 luacheck with vim-lint

叫 Warp AI 共我修改 plugins/lua.lua 來用 vim-lint 管控 luacheck，今改甲會用得矣，
效果袂䆀。

## git log --name-status

How to list which files are added or modified in git logs?

Warp AI: To list which files are added or modified in git logs, you have several
options depending on what level of detail you want:

## Basic Commands:

**1. Show only file names changed in each commit:**
git log --name-only
**2. Show file names with status (Added, Modified, Deleted):**
git log --name-status
**3. Show statistics (number of lines added/removed per file):**
git log --stat
## More Specific Options:

**4. One-line summary with file names:**
git log --oneline --name-only
**5. Show only the last N commits with file changes:**
git log -n 5 --name-status
**6. Show files changed in a specific commit:**
git show --name-status <commit-hash>
**7. List all unique files changed across multiple commits:**
git log --name-only --pretty=format: | sort -u
**8. Show full diff along with file names:**
git log -p
## File Status Indicators:
When using `--name-status`, you'll see:
- **A** = Added
- **M** = Modified  
- **D** = Deleted
- **R** = Renamed
- **C** = Copied

## Example Output:
With `git log --name-status`, you'd see something like:
commit abc123...
Author: Your Name
Date: ...

    Commit message

A       new-file.lua
M       init.lua
D       old-file.lua
The most commonly used option is `git log --name-status` as it provides a good
balance of information showing both what files changed and how they changed.

## find & awk to count line length of every lua file

Warp AI:

```bash
find . -name "*.lua" -type f -exec awk '{print length, FILENAME ":" NR ":", $0}' {} \; | sort -rn | head -20

find . -name "*.lua" -type f -exec awk '{if(length > max)
  {max = length; file = FILENAME; line = NR; content = $0}} END {print
  "File: " file "\nLine: " line "\nLength: " max "\nContent: " content}' {} +

find ~/.config/nvim -name "*.lua" -type f -exec awk '{len=length;
if(len>0) count[int(len/10)*10]++} END {print "Line Length Distribution";
for(i in count) print i "-" i+9 " chars: " count[i] " lines"}' {} + | sort -n

find ~/.config/nvim -name "*.lua" -type f -exec awk '{if(length > max) max = length}
  END {print FILENAME ": " max " chars (longest line)"}' {} \; | sort -t: -k2 -rn | head -10
```
