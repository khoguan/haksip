# 2025-08-22 學習日誌

- [ ] VIM REFERENCE MANUAL
- [ ] usr_10.txt
- [x] [null-ls] failed to run generator: vim/shared.lua:0: s: expected string, got nil

## VIM REFERENCE MANUAL

### intro.txt

1. 佇 tagstack 中間來來去去，`<C-]>` to jump to, `<C-T>` to jump back.

2. 設 keymap 个時，用 `<C-T>`，但是揣 help tag 是用 `:h CTRL-T`.

3. Virtual replace mode is similar to replace mode, but instead of file
   characters you are replacing screen real estate. It is very useful for
   editing <Tab> separated columns in tables, for entering new data while
   keeping all the columns aligned.

   Normal mode -> Replace mode: `R`
   Normal mode -> Virtual replace mode: `gR`

### 其他

1. `<C-k>xx` - xx 是某兩个符號，有定義佇 `:digraphs` 佮 `:h digraph-table`
   內底就會凍扑出某一个特殊符號（前者已經列佇 `~/Hak/vim-digraphs-listing.txt`）
   這欲扑 Raku Unicode symbol operators 真利便，像 `<C-k><<` 哇！袂記得我已經將
   `i_<C-k>` map 予 `<Up>` 矣，今著設法踅過。解：用 `:inoremap <M-k> <C-k>`

   - `<M-k><<` «
   - `<M-k>>>` »
   - `<M-k>a^` â
   - `<M-k>E^` Ê
   - `<M-k>ng` ŋ
   - `<M-k>7c` ㈦
   - `<M-k>e4` ㄜ
   - `<M-k>Co` ©
   - `<M-k>Rg` ®

   Raku 內个使用鋩角，參考 `:h ft_raku.txt`

## usr_10.txt

讀到 10.5

## 奇怪个 null-ls error

> [!ERROR]
> [null-ls] failed to run generator: vim/shared.lua:0: s: expected string,
> got nil

開一寡 lua 源碼个時，定定會跳出即个錯誤，後來知影是 null-ls 所管轄个 selene
linter 設定出問題。佇 git root 愛設兩个檔案，一个是 selene.toml 一个是
neovim.yml：

**selene.toml**

```toml
std = "neovim"

[rules]
global_usage = "allow"
if_same_then_else = "allow"
incorrect_standard_library_use = "allow"
mixed_table = "allow"
multiple_statements = "allow"
```

**neovim.yml**

```yaml
---
base: lua51

globals:
  vim:
    any: true
```

按呢就無問題。若是以下組合，也無問題：

**selene.toml**

```toml
std="vim"
```

**vim.yml**

```yaml
base: lua51
name: vim
globals:
  after_each:
    args:
    - type: function
  assert.equals:
    args:
    - type: any
    - type: any
    - required: false
      type: any
  assert.falsy:
    args:
    - type: any
  assert.has_error:
    any: true
  assert.is_not:
    any: true
  assert.matches:
    any: true
  assert.same:
    args:
    - type: any
    - type: any
  assert.spy:
    args:
    - type: any
  assert.stub:
    args:
    - type: any
  assert.truthy:
    args:
    - type: any
  before_each:
    args:
    - type: function
  describe:
    args:
    - type: string
    - type: function
  it:
    args:
    - type: string
    - type: function
  vim:
    any: true
```

但是以下一定會出現錯誤：

**selene.toml**

```toml
std = 'vim'

[lints]
mixed_table = 'allow'
```

**vim.toml**
[selene]
base = "lua51"
name = "vim"

[vim]
any = true

[jit]
any = true

[assert]
any = true

[describe]
any = true

[it]
any = true

[before_each.args]
any = true
```

真無奈！
